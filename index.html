<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenSpatial - Virtual Office</title>
    <meta name="description" content="A virtual office where teams can collaborate with floating video avatars and screen sharing">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="/client/assets/logo.svg">
    <link rel="stylesheet" href="/client/index.css">
</head>
<body>
    <!-- Join Space Modal -->
    <div id="join-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="logo">
                    <img src="/client/assets/logo.svg" alt="OpenSpatial" class="logo-icon">
                    <h1>OpenSpatial</h1>
                </div>
                <p class="tagline">Virtual office for remote teams</p>
            </div>
            <form id="join-form">
                <div class="form-group">
                    <label for="username">Your Name</label>
                    <input type="text" id="username" placeholder="Enter your name" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="space-id">Space</label>
                    <input type="text" id="space-id" placeholder="Enter space name or create new" required autocomplete="off">
                </div>
                <button type="submit" class="btn btn-primary">
                    <span>Join Space</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </button>
            </form>
        </div>
    </div>

    <!-- Main Canvas Area -->
    <div id="canvas-container" class="hidden">
        <!-- Space for avatars and screen shares -->
        <div id="space">
            <!-- Avatars and screen shares will be dynamically added here -->
        </div>

        <!-- Space Info -->
        <div id="space-info">
            <span id="space-name"></span>
            <span id="participant-count">0 participants</span>
        </div>

        <!-- Connection Status Banner -->
        <div id="connection-status" class="connection-status hidden"></div>

        <!-- Control Bar -->
        <div id="control-bar">
            <button id="btn-mic" class="control-btn" title="Toggle Microphone">
                <svg class="icon-on" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                    <line x1="12" y1="19" x2="12" y2="23"/>
                    <line x1="8" y1="23" x2="16" y2="23"/>
                </svg>
                <svg class="icon-off hidden" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="1" y1="1" x2="23" y2="23"/>
                    <path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"/>
                    <path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2c0 .74-.11 1.46-.32 2.14"/>
                    <line x1="12" y1="19" x2="12" y2="23"/>
                    <line x1="8" y1="23" x2="16" y2="23"/>
                </svg>
            </button>
            <button id="btn-camera" class="control-btn" title="Toggle Camera">
                <svg class="icon-on" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M23 7l-7 5 7 5V7z"/>
                    <rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
                </svg>
                <svg class="icon-off hidden" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"/>
                    <line x1="1" y1="1" x2="23" y2="23"/>
                </svg>
            </button>
            <button id="btn-screen" class="control-btn" title="Share Screen">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                    <line x1="8" y1="21" x2="16" y2="21"/>
                    <line x1="12" y1="17" x2="12" y2="21"/>
                </svg>
            </button>
            <div class="control-divider"></div>
            <div id="status-input-group" class="status-input-group">
                <input type="text" id="status-input" placeholder="Set status (e.g., BRB ~10 mins)" maxlength="50">
                <button id="btn-set-status" class="control-btn control-btn-sm" title="Set Status">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                </button>
                <button id="btn-clear-status" class="control-btn control-btn-sm control-btn-muted" title="Clear Status">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="control-divider"></div>
            <button id="btn-leave" class="control-btn control-btn-danger" title="Leave Space">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                    <polyline points="16 17 21 12 16 7"/>
                    <line x1="21" y1="12" x2="9" y2="12"/>
                </svg>
            </button>
        </div>
    </div>

    <script type="module" src="/client/main.ts"></script>
</body>
</html>
